# ğŸ¢ 2ì„œë²„ MinIO ë¶„ì‚° ì„¤ì • - ì‹¤ì œ êµ¬ì„± ë°©ë²•

# ===============================================
# ì„œë²„1 (192.168.1.101) ì„¤ì •
# ===============================================
version: '3.8'
services:
  minio-node1:
    image: minio/minio:latest
    restart: unless-stopped
    hostname: minio-node1
    container_name: minio-node1
    environment:
      MINIO_ROOT_USER: ${MINIO_ROOT_USER}
      MINIO_ROOT_PASSWORD: ${MINIO_ROOT_PASSWORD}

      # âš ï¸ 2ì„œë²„ ë¶„ì‚° ëª¨ë“œ ì œì•½ì‚¬í•­
      # - ìµœì†Œ 4ê°œ ë“œë¼ì´ë¸Œ í•„ìš” (ì„œë²„ë‹¹ 2ê°œì”©)
      # - 1ê°œ ì„œë²„ ì¥ì• ì‹œ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ (íŒ¨ë¦¬í‹° ë¶€ì¡±)
      # - EC:1 (1ê°œ ë“œë¼ì´ë¸Œ ì¥ì• ë§Œ í—ˆìš©)
      MINIO_STORAGE_CLASS_STANDARD: "EC:1"     # 1ê°œ íŒ¨ë¦¬í‹°

    # ğŸ”„ 2ì„œë²„ 4ë“œë¼ì´ë¸Œ êµ¬ì„±
    command: >
      server
      http://192.168.1.101:9000/data1 http://192.168.1.101:9000/data2
      http://192.168.1.102:9000/data1 http://192.168.1.102:9000/data2
      --console-address ":9001"

    ports:
      - "9000:9000"   # S3 API
      - "9001:9001"   # ì›¹ ì½˜ì†”

    volumes:
      - /mnt/disk1:/data1   # ì„œë²„1 ì²« ë²ˆì§¸ ë””ìŠ¤í¬
      - /mnt/disk2:/data2   # ì„œë²„1 ë‘ ë²ˆì§¸ ë””ìŠ¤í¬

---

# ===============================================
# ì„œë²„2 (192.168.1.102) ì„¤ì •
# ===============================================
version: '3.8'
services:
  minio-node2:
    image: minio/minio:latest
    restart: unless-stopped
    hostname: minio-node2
    container_name: minio-node2
    environment:
      MINIO_ROOT_USER: ${MINIO_ROOT_USER}      # ì„œë²„1ê³¼ ë™ì¼
      MINIO_ROOT_PASSWORD: ${MINIO_ROOT_PASSWORD}
      MINIO_STORAGE_CLASS_STANDARD: "EC:1"

    # âš ï¸ ë™ì¼í•œ command - ëª¨ë“  ì„œë²„ì˜ ëª¨ë“  ë“œë¼ì´ë¸Œ ì§€ì •
    command: >
      server
      http://192.168.1.101:9000/data1 http://192.168.1.101:9000/data2
      http://192.168.1.102:9000/data1 http://192.168.1.102:9000/data2
      --console-address ":9001"

    ports:
      - "9000:9000"
      - "9001:9001"

    volumes:
      - /mnt/disk1:/data1   # ì„œë²„2 ì²« ë²ˆì§¸ ë””ìŠ¤í¬
      - /mnt/disk2:/data2   # ì„œë²„2 ë‘ ë²ˆì§¸ ë””ìŠ¤í¬

